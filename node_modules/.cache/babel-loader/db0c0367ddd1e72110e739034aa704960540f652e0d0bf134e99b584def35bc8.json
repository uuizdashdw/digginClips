{"ast":null,"code":"var _s = $RefreshSig$();\n// Hooks\nimport { useEffect } from 'react';\n\n// Zustand Store\nimport useStore from '../../store';\n\n// Firebase\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\n\n// APIs\nimport { fetchUsers } from '../../api/getUsers';\nconst AuthListener = () => {\n  _s();\n  const setUser = useStore(state => state.setUser);\n  useEffect(() => {\n    const auth = getAuth();\n    const unsubscribe = onAuthStateChanged(auth, async firebaseUser => {\n      if (firebaseUser) {\n        const users = await fetchUsers();\n        const currentUser = users.find(u => u.uid === firebaseUser.uid);\n        currentUser && setUser(currentUser);\n      } else {\n        // 로그아웃 시 null 설정\n        setUser(null);\n      }\n    });\n    return () => unsubscribe();\n  }, []);\n  return null;\n};\n_s(AuthListener, \"xJ3CmqQpAQBaONWEfui6Sqb0xW8=\", false, function () {\n  return [useStore];\n});\n_c = AuthListener;\nexport default AuthListener;\nvar _c;\n$RefreshReg$(_c, \"AuthListener\");","map":{"version":3,"names":["useEffect","useStore","getAuth","onAuthStateChanged","fetchUsers","AuthListener","_s","setUser","state","auth","unsubscribe","firebaseUser","users","currentUser","find","u","uid","_c","$RefreshReg$"],"sources":["/Users/mac/clips-project/src/components/firebase/AuthListener.tsx"],"sourcesContent":["// Hooks\nimport { useEffect } from 'react';\n\n// Zustand Store\nimport useStore from '../../store';\n\n// Firebase\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\n\n// APIs\nimport { fetchUsers } from '../../api/getUsers';\n\nconst AuthListener = () => {\n\tconst setUser = useStore(state => state.setUser);\n\n\tuseEffect(() => {\n\t\tconst auth = getAuth();\n\t\tconst unsubscribe = onAuthStateChanged(auth, async firebaseUser => {\n\t\t\tif (firebaseUser) {\n\t\t\t\tconst users = await fetchUsers();\n\t\t\t\tconst currentUser = users.find(u => u.uid === firebaseUser.uid);\n\n\t\t\t\tcurrentUser && setUser(currentUser);\n\t\t\t} else {\n\t\t\t\t// 로그아웃 시 null 설정\n\t\t\t\tsetUser(null);\n\t\t\t}\n\t\t});\n\n\t\treturn () => unsubscribe();\n\t}, []);\n\n\treturn null;\n};\n\nexport default AuthListener;\n"],"mappings":";AAAA;AACA,SAASA,SAAS,QAAQ,OAAO;;AAEjC;AACA,OAAOC,QAAQ,MAAM,aAAa;;AAElC;AACA,SAASC,OAAO,EAAEC,kBAAkB,QAAQ,eAAe;;AAE3D;AACA,SAASC,UAAU,QAAQ,oBAAoB;AAE/C,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAMC,OAAO,GAAGN,QAAQ,CAACO,KAAK,IAAIA,KAAK,CAACD,OAAO,CAAC;EAEhDP,SAAS,CAAC,MAAM;IACf,MAAMS,IAAI,GAAGP,OAAO,CAAC,CAAC;IACtB,MAAMQ,WAAW,GAAGP,kBAAkB,CAACM,IAAI,EAAE,MAAME,YAAY,IAAI;MAClE,IAAIA,YAAY,EAAE;QACjB,MAAMC,KAAK,GAAG,MAAMR,UAAU,CAAC,CAAC;QAChC,MAAMS,WAAW,GAAGD,KAAK,CAACE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKL,YAAY,CAACK,GAAG,CAAC;QAE/DH,WAAW,IAAIN,OAAO,CAACM,WAAW,CAAC;MACpC,CAAC,MAAM;QACN;QACAN,OAAO,CAAC,IAAI,CAAC;MACd;IACD,CAAC,CAAC;IAEF,OAAO,MAAMG,WAAW,CAAC,CAAC;EAC3B,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,IAAI;AACZ,CAAC;AAACJ,EAAA,CArBID,YAAY;EAAA,QACDJ,QAAQ;AAAA;AAAAgB,EAAA,GADnBZ,YAAY;AAuBlB,eAAeA,YAAY;AAAC,IAAAY,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}